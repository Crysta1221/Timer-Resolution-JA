scoreboard players set 1200 system 1200
scoreboard players set 20 system 20
scoreboard players set 60 system 60
scoreboard players set 72000 system 72000

execute if score timer_mode timer matches 1 if score timer_do timer matches 1 run function count:countdown/init
execute if score timer_mode timer matches 2 if score timer_do timer matches 1 run function count:countup/init

# Countdown hh:mm:ss
execute if score timer_mode timer matches 1 if score timerM timer matches 10.. if score timerS timer matches 10.. run title @a actionbar [{"text":"残り時間: ","color":"yellow"},{"text":"","color":"white"},{"score":{"name":"timerH","objective":"timer"},"color":"white"},{"text":":","color":"white"},{"score":{"name":"timerM","objective":"timer"},"color":"white"},{"text":":","color":"white"},{"score":{"name":"timerS","objective":"timer"},"color":"white"},{"text":" モード:","color":"aqua"},{"text":" カウントダウン","color":"red"}]
execute if score timer_mode timer matches 1 if score timerM timer matches 10.. if score timerS timer matches ..9 run title @a actionbar [{"text":"残り時間: ","color":"yellow"},{"text":"","color":"white"},{"score":{"name":"timerH","objective":"timer"},"color":"white"},{"text":":","color":"white"},{"score":{"name":"timerM","objective":"timer"},"color":"white"},{"text":":0","color":"white"},{"score":{"name":"timerS","objective":"timer"},"color":"white"},{"text":" モード:","color":"aqua"},{"text":" カウントダウン","color":"red"}]
execute if score timer_mode timer matches 1 if score timerM timer matches ..9 if score timerS timer matches 10.. run title @a actionbar [{"text":"残り時間: ","color":"yellow"},{"text":"","color":"white"},{"score":{"name":"timerH","objective":"timer"},"color":"white"},{"text":":0","color":"white"},{"score":{"name":"timerM","objective":"timer"},"color":"white"},{"text":":","color":"white"},{"score":{"name":"timerS","objective":"timer"},"color":"white"},{"text":" モード:","color":"aqua"},{"text":" カウントダウン","color":"red"}]
execute if score timer_mode timer matches 1 if score timerM timer matches ..9 if score timerS timer matches ..9 run title @a actionbar [{"text":"残り時間: ","color":"yellow"},{"text":"","color":"white"},{"score":{"name":"timerH","objective":"timer"},"color":"white"},{"text":":0","color":"white"},{"score":{"name":"timerM","objective":"timer"},"color":"white"},{"text":":0","color":"white"},{"score":{"name":"timerS","objective":"timer"},"color":"white"},{"text":" モード:","color":"aqua"},{"text":" カウントダウン","color":"red"}]

# Countup hh:mm:ss
execute if score timer_mode timer matches 2 if score timerM timer matches 10.. if score timerS timer matches 10.. run title @a actionbar [{"text":"経過時間: ","color":"yellow"},{"text":"","color":"white"},{"score":{"name":"timerH","objective":"timer"},"color":"white"},{"text":":","color":"white"},{"score":{"name":"timerM","objective":"timer"},"color":"white"},{"text":":","color":"white"},{"score":{"name":"timerS","objective":"timer"},"color":"white"},{"text":" モード:","color":"aqua"},{"text":" カウントアップ","color":"green"}]
execute if score timer_mode timer matches 2 if score timerM timer matches 10.. if score timerS timer matches ..9 run title @a actionbar [{"text":"経過時間: ","color":"yellow"},{"text":"","color":"white"},{"score":{"name":"timerH","objective":"timer"},"color":"white"},{"text":":","color":"white"},{"score":{"name":"timerM","objective":"timer"},"color":"white"},{"text":":0","color":"white"},{"score":{"name":"timerS","objective":"timer"},"color":"white"},{"text":" モード:","color":"aqua"},{"text":" カウントアップ","color":"green"}]
execute if score timer_mode timer matches 2 if score timerM timer matches ..9 if score timerS timer matches 10.. run title @a actionbar [{"text":"経過時間: ","color":"yellow"},{"text":"","color":"white"},{"score":{"name":"timerH","objective":"timer"},"color":"white"},{"text":":0","color":"white"},{"score":{"name":"timerM","objective":"timer"},"color":"white"},{"text":":","color":"white"},{"score":{"name":"timerS","objective":"timer"},"color":"white"},{"text":" モード:","color":"aqua"},{"text":" カウントアップ","color":"green"}]
execute if score timer_mode timer matches 2 if score timerM timer matches ..9 if score timerS timer matches ..9 run title @a actionbar [{"text":"経過時間: ","color":"yellow"},{"text":"","color":"white"},{"score":{"name":"timerH","objective":"timer"},"color":"white"},{"text":":0","color":"white"},{"score":{"name":"timerM","objective":"timer"},"color":"white"},{"text":":0","color":"white"},{"score":{"name":"timerS","objective":"timer"},"color":"white"},{"text":" モード:","color":"aqua"},{"text":" カウントアップ","color":"green"}]

execute if score timer_do timer matches 0 as @a[tag=op] at @s run item replace entity @s container.0 with written_book{pages:['["",{"text":"     \\u30ab\\u30a6\\u30f3\\u30c8\\u30c0\\u30a6\\u30f3","bold":true,"color":"red"},{"text":"\\n\\n\\u30fb\\u6642\\u9593\\n","color":"black"},{"text":"     <","clickEvent":{"action":"run_command","value":"function count:timer/remove1h"}},{"text":" "},{"score":{"name":"timerH","objective":"system"}},{"text":" "},{"text":">","clickEvent":{"action":"run_command","value":"/function count:timer/add1h"}},{"text":"\\n\\u30fb\\u5206\\n"},{"text":"<<","clickEvent":{"action":"run_command","value":"/function count:timer/remove5m"}},{"text":"  "},{"text":"<","clickEvent":{"action":"run_command","value":"/function count:timer/remove1m"}},{"text":" "},{"score":{"name":"timerM","objective":"system"}},{"text":" "},{"text":">","clickEvent":{"action":"run_command","value":"/function count:timer/add1m"}},{"text":"  "},{"text":">>","clickEvent":{"action":"run_command","value":"/function count:timer/add5m"}},{"text":"\\n\\u30fb\\u79d2\\n"},{"text":"<<","clickEvent":{"action":"run_command","value":"/function count:timer/remove10s"}},{"text":"  "},{"text":"<","clickEvent":{"action":"run_command","value":"/function count:timer/remove5s"}},{"text":" "},{"score":{"name":"timerS","objective":"system"}},{"text":" "},{"text":">","clickEvent":{"action":"run_command","value":"/function count:timer/add5s"}},{"text":"  "},{"text":">>","clickEvent":{"action":"run_command","value":"/function count:timer/add10s"}},{"text":"\\n\\n"},{"text":"\\u30bf\\u30a4\\u30de\\u30fc\\u958b\\u59cb!!","underlined":true,"color":"aqua","clickEvent":{"action":"run_command","value":"/function count:init/prepare"}},{"text":"\\n","color":"black"},{"text":"\\u30ea\\u30bb\\u30c3\\u30c8","underlined":true,"color":"red","clickEvent":{"action":"run_command","value":"/function count:countdown/reset"}}]','["",{"text":"     \\u30ab\\u30a6\\u30f3\\u30c8\\u30a2\\u30c3\\u30d7","bold":true,"color":"green"},{"text":"\\n\\n","color":"black"},{"text":"\\u30ab\\u30a6\\u30f3\\u30c8\\u958b\\u59cb!!","color":"aqua","underlined":true,"clickEvent":{"action":"run_command","value":"/function count:init/prepare"}},{"text":"\\n","color":"black"},{"text":"\\u30ab\\u30a6\\u30f3\\u30c8\\u3092\\u505c\\u6b62","color":"gold","underlined":true,"clickEvent":{"action":"run_command","value":"/function count:countup/stop"}},{"text":"\\n","color":"black"},{"text":"\\u30ab\\u30a6\\u30f3\\u30c8\\u30ea\\u30bb\\u30c3\\u30c8","color":"red","underlined":true,"clickEvent":{"action":"run_command","value":"/function count:countup/reset"}}]','["",{"text":"     ゲームモード","color":"aqua","bold":true},{"text":"\\n","color":"black"},{"text":"カウントアップ","color":"green","underlined": true,"clickEvent": {"action":"run_command","value": "/function count:mode/countup"}},{"text":"\\n","color":"black"},{"text":"カウントダウン","color":"red","underlined": true,"clickEvent": {"action":"run_command","value": "/function count:mode/countdown"}}]'],title:"Count Datapack Operation",author:Crysta1221}